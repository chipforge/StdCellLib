# StdCellLib

This Repository contains all Sources for LibreSilicons's Standard Cell Library.
Started once as manual work, given slow progress, the focus was shifted to the Standard Cell Generator which was named "Popcorn".
Many Sources are now generated by Popcorn and are still Work-In-Progress.
Check back regulary for updates.

And please, do not hesitate to contact the authors of Standard Cell Library for patches, feature additions or questions.
Any feedback is welcome by [Email](mailto://stdcelllib@nospam.chipforge.org "stdcelllib@nospam.chipforge.org").

## Requirements

### Documentation

The Standard Cell Library uses LaTeX for documentation. On Debian based systems, LaTeX can be installed (as root) with

```
apt-get install texlive-latex-extra texlive-extra-utils texlive-latex-recommended
```

or shorter

```
apt-get install texlive-full
```

which installs the complete (and usefull) LaTeX Environment.
Additionally, we use the great CircDia LaTeX package for drawing diagrams by Dr. Stefan Krause (Saarbr&uuml;cken/Germany). Please download [CircDia](http://www.taylorgruppe.de/circdia "http://www.taylorgruppe.de/circdia"), unzip it, and run `mktexlsr` in the directory. Many Thanks to Stefan for the excellent work!

### Generators

Popcorn (as the tool which does the voodoo stuff and generates the Standard Cells) and other dedicated tools are written in R^7RS Scheme. While this Standard is already a couple of years old, not so many Scheme interpreter/compiler are supporting them. Chibi-Scheme as a pre-built package that is not available on most systems, so we are using Gauche Scheme (or `gosh`) in Version 0.9.6 or higher.

```
apt-get install gauche
```

Please check that you have the correct version by

```
gosh -V
```

some more "conservative" distributions with Long-Time-Support (LTS) are probably stuck at older versions.

### Schematics and Symbols

For the graphical Schematics of the cells and their Symbols the Xschem by Stefan Schippers is used. His Tool Xschem replaces the former usage of the gEDA/gaf tool suite, which is not part of some Linux standard distribution (like Debian) anymore. BTW, Xschem is dedicated to VLSI design; instead of PCB design as gEDA/gaf or even their fork Lepton-EDA. Xschem allows to export the cells directly into Verilog HDL, VHDL or Spice. Install Xschem by

```
apt-get install xschem
```

### Simulation

For simulation Icarus Verilog and NGspice are used; also sailing under the gEDA flag. Use

```
apt-get install iverilog gtkwave ngspice gwave
```

### Layout

Another software for the Popcorn tool, which should be installed before usage, is [Magic](http://opencircuitdesign.com/magic "http://opencircuitdesign.com/magic"). Magic is Open Source, but not part of all Linux distributions (it is missing on OpenSuse, Arch Linux etc). On Debian based systems,

```
apt-get install magic
```

works.

## Usage

The Standard Cells (and the cell generator) are controlled / ruled with GNU Make. On Debian based systems, Make can be installed with

```
apt-get install make
```

Please make yourself familiar with the GNUmakefile system - assure you are not root anymore - by typing:

```
make
```

which shows a help screen with available targets.

### Tool Preparing

First prepare all home-tailored tools by typing

```
make tools
```

This will generate helpfull manual pages about the tools and the formats, the Standard Cell Library is using. Please read them (inside the ./Tool directory).

### Generate Cell Descriptions

Once all tools are installed, you might copy and adapt a TOML configuration file from ./Template/TOML directory into your project root directory and run

```
make catalog
```

which re-generates the majority of the Cell Description Catalog, and overwrites older, already generated cells. Doing so, GNU Make sees the new timestamp and redoes the following (time-consuming) steps once again. All manual changes on cells in the catalog will be lost.

Please re-generate the catalog only, if you know what you're doing and have strong reasons for that.

### Generate Cell Layouts

```
make layout
```

### Distribution

Once all cells in all cell representations you need (library files, layout files, simulation models, etc.) are complete, you should run

```
make doc
```

and build the holistic Standard Cell Library documention under

```
./Distribution/StdCellLib.pdf
```

with all already generated cells.

Hopefully, you did a great job, did not forget a piece of work, and all things went fine. Please check the documentation. Finaly

```
make dist
```

generates a compressed archive (.tgz) of all important files, named with the current date. If you are sure nothing is missing, this is the file to ditstribute as Standard Cell Library and to store in your repository (and to be tagged as release).

Btw., the tooling should *not* be part of the distribution.

Congratulations! You generated a Standard Cell Library :-) There aren't many people who can say they've done that.
